# Docker Compose file to run local MCP server for weather-agent
# Usage: docker compose up -d
# Stop: docker compose down

services:
  mcp-server:
    image: ghcr.io/cheqd/mcp-toolkit:staging-latest
    container_name: weather-agent-mcp
    ports:
      - '3001:3001'  # MCP remote server
      - '3000:3000'  # Credo agent
    restart: on-failure
    environment:
      - TOOLS=credo
      - PORT=3001
      - CREDO_PORT=3000
      - CREDO_NAME=weather-agent-wallet
      - CREDO_ENDPOINT=http://localhost:3000
      - CREDO_CHEQD_TESTNET_MNEMONIC=${CHEQD_MNEMONIC}
      - TRAIN_ENDPOINT=https://dev-train.trust-scheme.de/tcr/v1/
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3001/status"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 60s
    networks:
      - weather-agent-network

networks:
  weather-agent-network:
    name: weather-agent-network
    driver: bridge
